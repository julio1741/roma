---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<Layout
  title="Contacto - Roma | Solicita tu cotización"
  description="Contacta a Roma para solicitar una cotización personalizada. Conversemos sobre cómo nuestros servicios profesionales pueden potenciar tu operación minera."
  keywords="contacto Roma, cotización servicios minería, consulta profesional minería Chile, solicitar propuesta Roma"
>
  <Header />
  <main>
    <!-- Hero Contacto -->
    <section class="page-hero">
      <div class="container">
        <div class="hero-content text-center">
          <h1>¡Hablemos!</h1>
          <p class="hero-subtitle">Conversemos sobre cómo Roma puede potenciar tu operación minera</p>
        </div>
      </div>
    </section>

    <!-- Formulario y Info de Contacto -->
    <section class="contact-section section">
      <div class="container">
        <div class="contact-content">
          <!-- Formulario -->
          <div class="contact-form-container">
            <div class="form-header">
              <h2>Solicita tu Cotización</h2>
              <p>Cuéntanos sobre tu proyecto y te contactaremos en menos de 24 horas con una propuesta personalizada.</p>
            </div>

            <form class="contact-form" id="contactForm">
              <!-- Información Personal -->
              <div class="form-section">
                <h3>Información de Contacto</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label for="nombre">Nombre Completo *</label>
                    <input type="text" id="nombre" name="nombre" required>
                  </div>
                  <div class="form-group">
                    <label for="cargo">Cargo</label>
                    <input type="text" id="cargo" name="cargo">
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="empresa">Empresa *</label>
                    <input type="text" id="empresa" name="empresa" required>
                  </div>
                  <div class="form-group">
                    <label for="industria">Industria</label>
                    <select id="industria" name="industria">
                      <option value="">Selecciona...</option>
                      <option value="mineria-cobre">Minería - Cobre</option>
                      <option value="mineria-oro">Minería - Oro</option>
                      <option value="mineria-hierro">Minería - Hierro</option>
                      <option value="mineria-litio">Minería - Litio</option>
                      <option value="mineria-otros">Minería - Otros</option>
                      <option value="energia">Energía</option>
                      <option value="construccion">Construcción</option>
                      <option value="otros">Otros</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="email">Email Corporativo *</label>
                    <input type="email" id="email" name="email" required>
                  </div>
                  <div class="form-group">
                    <label for="telefono">Teléfono</label>
                    <input type="tel" id="telefono" name="telefono">
                  </div>
                </div>
              </div>

              <!-- Información del Proyecto -->
              <div class="form-section">
                <h3>Detalles del Proyecto</h3>

                <div class="form-group">
                  <label for="servicio">Tipo de Servicio *</label>
                  <select id="servicio" name="servicio" required>
                    <option value="">Selecciona el servicio...</option>
                    <option value="profesionales">Servicios Profesionales</option>
                    <option value="consultoria">Consultoría Especializada (FOCUS)</option>
                    <option value="capacitacion">Capacitación & Conferencias</option>
                    <option value="productos-epds">Productos EPDS</option>
                    <option value="multiples">Múltiples Servicios</option>
                    <option value="otros">Otros / No estoy seguro</option>
                  </select>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label for="duracion">Duración Estimada</label>
                    <select id="duracion" name="duracion">
                      <option value="">Selecciona...</option>
                      <option value="1-3-meses">1 - 3 meses</option>
                      <option value="3-6-meses">3 - 6 meses</option>
                      <option value="6-12-meses">6 - 12 meses</option>
                      <option value="mas-12-meses">Más de 12 meses</option>
                      <option value="proyecto-puntual">Proyecto puntual</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="urgencia">Urgencia</label>
                    <select id="urgencia" name="urgencia">
                      <option value="">Selecciona...</option>
                      <option value="inmediato">Inmediato (Esta semana)</option>
                      <option value="1-mes">En el próximo mes</option>
                      <option value="2-3-meses">En 2-3 meses</option>
                      <option value="planificacion">Solo planificación</option>
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <label for="area-especializacion">Área de Especialización</label>
                  <div class="checkbox-group">
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="medio-ambiente">
                      <span class="checkbox-text">Medio Ambiente</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="tecnologia">
                      <span class="checkbox-text">Tecnología</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="proyectos-criticos">
                      <span class="checkbox-text">Proyectos Críticos</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="gestion-proyectos">
                      <span class="checkbox-text">Gestión de Proyectos</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="capacitacion">
                      <span class="checkbox-text">Capacitación</span>
                    </label>
                    <label class="checkbox-label">
                      <input type="checkbox" name="areas[]" value="otros">
                      <span class="checkbox-text">Otros</span>
                    </label>
                  </div>
                </div>

                <div class="form-group">
                  <label for="descripcion">Describe tu Necesidad *</label>
                  <textarea
                    id="descripcion"
                    name="descripcion"
                    rows="5"
                    placeholder="Cuéntanos sobre el desafío específico que enfrentas, el contexto de tu operación, y qué esperas lograr con este proyecto..."
                    required
                  ></textarea>
                </div>
              </div>

              <!-- Impacto Social -->
              <div class="form-section social-section">
                <h3>Impacto Social</h3>
                <div class="social-info">
                  <div class="social-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                  </div>
                  <div>
                    <p><strong>Tu proyecto generará impacto social positivo.</strong></p>
                    <p>Como parte de nuestro compromiso "El Poder de Sumar", destinaremos parte de los ingresos de tu proyecto a causas sociales en Chile.</p>
                  </div>
                </div>

                <div class="form-group">
                  <label for="causa-preferida">¿Hay alguna causa social de tu preferencia?</label>
                  <select id="causa-preferida" name="causa-preferida">
                    <option value="">Puedes elegir o dejamos que Roma decida</option>
                    <option value="personas-calle">Personas en situación de calle</option>
                    <option value="educacion">Proyectos educativos</option>
                    <option value="comunidades">Fortalecimiento comunitario</option>
                    <option value="medio-ambiente">Proyectos ambientales</option>
                    <option value="roma-decide">Que Roma elija la causa más apropiada</option>
                  </select>
                </div>
              </div>

              <!-- Botón de envío -->
              <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-lg">
                  <span class="btn-text">Solicitar Cotización</span>
                  <span class="btn-loading" style="display: none;">Enviando...</span>
                </button>
                <p class="form-note">* Nos contactaremos contigo en menos de 24 horas</p>
              </div>
            </form>
          </div>

          <!-- Información de Contacto -->
          <div class="contact-info-container">
            <div class="contact-info-card">
              <h3>Información de Contacto</h3>

              <div class="contact-methods">
                <div class="contact-method">
                  <div class="method-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                      <polyline points="22,6 12,13 2,6"/>
                    </svg>
                  </div>
                  <div>
                    <h4>Email</h4>
                    <p><a href="mailto:contacto@roma.cl">contacto@roma.cl</a></p>
                  </div>
                </div>

                <div class="contact-method">
                  <div class="method-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                      <rect width="4" height="12" x="2" y="9"/>
                      <circle cx="4" cy="4" r="2"/>
                    </svg>
                  </div>
                  <div>
                    <h4>LinkedIn</h4>
                    <p><a href="https://linkedin.com/company/roma" target="_blank" rel="noopener">/company/roma</a></p>
                  </div>
                </div>
              </div>

              <div class="response-time">
                <div class="time-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12,6 12,12 16,14"/>
                  </svg>
                </div>
                <div>
                  <h4>Tiempo de Respuesta</h4>
                  <p><strong>Menos de 24 horas</strong></p>
                  <p class="time-note">Te contactaremos con una propuesta inicial personalizada</p>
                </div>
              </div>
            </div>

            <!-- FAQ Rápido -->
            <div class="quick-faq">
              <h3>Preguntas Frecuentes</h3>

              <div class="faq-item">
                <h4>¿Cómo funciona el proceso de cotización?</h4>
                <p>Analizamos tu necesidad específica y en menos de 24 horas te enviamos una propuesta personalizada con alcance, tiempos y costos.</p>
              </div>

              <div class="faq-item">
                <h4>¿Qué incluye el "Plug & Play"?</h4>
                <p>Nuestros profesionales son previamente capacitados en tu cultura empresarial y estándares, garantizando integración inmediata.</p>
              </div>

              <div class="faq-item">
                <h4>¿Cómo se mide el impacto social?</h4>
                <p>Te proporcionamos reportes detallados del impacto social generado por tu proyecto, con métricas concretas y verificables.</p>
              </div>

              <div class="faq-item">
                <h4>¿Trabajan con proyectos de cualquier tamaño?</h4>
                <p>Sí, desde consultorías puntuales hasta contratos de largo plazo. Nos adaptamos a tus requerimientos específicos.</p>
              </div>
            </div>

            <!-- Testimonial -->
            <div class="testimonial-card">
              <div class="testimonial-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z"/>
                  <path d="M15 9h4c1.1 0 2 .9 2 2v11l-4-4h-6c-1.1 0-2-.9-2-2v-1"/>
                </svg>
              </div>
              <blockquote>
                "Roma no solo resuelve nuestros desafíos técnicos con agilidad, sino que nos permite mostrar nuestro compromiso social de manera concreta."
              </blockquote>
              <cite>- Cliente de la industria minera</cite>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<style>
/* Hero de página */
.page-hero {
  background: linear-gradient(135deg, var(--color-primary-black) 0%, #333333 100%);
  color: white;
  padding: calc(var(--spacing-3xl) + 80px) 0 var(--spacing-3xl) 0;
  text-align: center;
}

.page-hero h1 {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 700;
  margin-bottom: var(--spacing-md);
  color: white;
}

.hero-subtitle {
  font-size: var(--font-size-xl);
  color: rgba(255, 255, 255, 0.9);
  font-weight: 400;
}

/* Layout del contacto */
.contact-content {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: var(--spacing-3xl);
  align-items: start;
}

/* Formulario */
.contact-form-container {
  background: white;
  border-radius: var(--radius-xl);
  padding: var(--spacing-2xl);
  box-shadow: var(--shadow-lg);
}

.form-header {
  text-align: center;
  margin-bottom: var(--spacing-2xl);
  border-bottom: 2px solid var(--color-primary-orange);
  padding-bottom: var(--spacing-lg);
}

.form-header h2 {
  color: var(--color-primary-black);
  margin-bottom: var(--spacing-md);
}

.form-header p {
  color: var(--color-gray-dark);
  font-size: var(--font-size-lg);
  margin-bottom: 0;
}

/* Secciones del formulario */
.form-section {
  margin-bottom: var(--spacing-2xl);
  padding-bottom: var(--spacing-xl);
  border-bottom: 1px solid var(--color-gray-light);
}

.form-section:last-of-type {
  border-bottom: none;
  margin-bottom: 0;
}

.form-section h3 {
  color: var(--color-primary-black);
  font-weight: 600;
  margin-bottom: var(--spacing-lg);
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
}

.form-section h3::before {
  content: '';
  width: 4px;
  height: 20px;
  background: var(--color-primary-green);
  border-radius: 2px;
}

/* Campos del formulario */
.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-lg);
}

.form-group {
  margin-bottom: var(--spacing-lg);
}

.form-group label {
  display: block;
  font-weight: 500;
  color: var(--color-primary-black);
  margin-bottom: var(--spacing-sm);
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: var(--spacing-md);
  border: 2px solid var(--color-gray-medium);
  border-radius: var(--radius-md);
  font-size: var(--font-size-base);
  transition: all var(--transition-fast);
  font-family: inherit;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: var(--color-primary-orange);
  box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.1);
}

.form-group textarea {
  resize: vertical;
  min-height: 120px;
}

/* Checkboxes */
.checkbox-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  cursor: pointer;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  transition: background var(--transition-fast);
}

.checkbox-label:hover {
  background: var(--color-gray-light);
}

.checkbox-label input[type="checkbox"] {
  width: auto;
  margin: 0;
}

.checkbox-text {
  font-size: var(--font-size-sm);
  color: var(--color-gray-dark);
}

/* Sección social */
.social-section {
  background: linear-gradient(135deg, rgba(34, 139, 34, 0.1) 0%, rgba(34, 139, 34, 0.05) 100%);
  padding: var(--spacing-xl);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--color-primary-green);
}

.social-info {
  display: flex;
  gap: var(--spacing-lg);
  align-items: flex-start;
  margin-bottom: var(--spacing-lg);
}

.social-icon {
  background: var(--color-primary-green);
  color: white;
  padding: var(--spacing-md);
  border-radius: var(--radius-lg);
  flex-shrink: 0;
}

.social-info p {
  margin-bottom: var(--spacing-sm);
  color: var(--color-gray-dark);
}

/* Acciones del formulario */
.form-actions {
  text-align: center;
  padding-top: var(--spacing-xl);
  border-top: 2px solid var(--color-gray-light);
}

.form-actions .btn {
  min-width: 250px;
  position: relative;
}

.btn-loading {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.form-note {
  font-size: var(--font-size-sm);
  color: var(--color-gray-dark);
  margin-top: var(--spacing-md);
  font-style: italic;
}

/* Información de contacto */
.contact-info-container {
  display: grid;
  gap: var(--spacing-xl);
}

.contact-info-card,
.quick-faq,
.testimonial-card {
  background: white;
  border-radius: var(--radius-xl);
  padding: var(--spacing-xl);
  box-shadow: var(--shadow-md);
}

.contact-info-card h3,
.quick-faq h3 {
  color: var(--color-primary-black);
  text-align: center;
  margin-bottom: var(--spacing-lg);
  border-bottom: 2px solid var(--color-primary-green);
  padding-bottom: var(--spacing-sm);
}

/* Métodos de contacto */
.contact-methods {
  display: grid;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-xl);
}

.contact-method {
  display: flex;
  gap: var(--spacing-md);
  align-items: flex-start;
}

.method-icon {
  background: var(--color-primary-orange);
  color: white;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.contact-method h4 {
  font-weight: 600;
  color: var(--color-primary-black);
  margin-bottom: var(--spacing-xs);
}

.contact-method p {
  margin-bottom: 0;
  font-size: var(--font-size-sm);
}

.contact-method a {
  color: var(--color-primary-orange);
  font-weight: 500;
}

/* Tiempo de respuesta */
.response-time {
  display: flex;
  gap: var(--spacing-md);
  align-items: flex-start;
  background: var(--color-gray-light);
  padding: var(--spacing-lg);
  border-radius: var(--radius-md);
}

.time-icon {
  background: var(--color-primary-green);
  color: white;
  padding: var(--spacing-sm);
  border-radius: var(--radius-md);
  flex-shrink: 0;
}

.response-time h4 {
  font-weight: 600;
  color: var(--color-primary-black);
  margin-bottom: var(--spacing-xs);
}

.response-time p {
  margin-bottom: var(--spacing-xs);
  font-size: var(--font-size-sm);
}

.time-note {
  color: var(--color-gray-dark);
  font-style: italic;
}

/* FAQ */
.faq-item {
  margin-bottom: var(--spacing-lg);
  padding-bottom: var(--spacing-lg);
  border-bottom: 1px solid var(--color-gray-light);
}

.faq-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.faq-item h4 {
  font-weight: 600;
  color: var(--color-primary-black);
  margin-bottom: var(--spacing-sm);
  font-size: var(--font-size-base);
}

.faq-item p {
  color: var(--color-gray-dark);
  font-size: var(--font-size-sm);
  line-height: 1.6;
  margin-bottom: 0;
}

/* Testimonial */
.testimonial-card {
  border: 2px solid var(--color-primary-green);
  text-align: center;
  position: relative;
}

.testimonial-icon {
  background: var(--color-primary-green);
  color: white;
  padding: var(--spacing-md);
  border-radius: 50%;
  display: inline-flex;
  margin-bottom: var(--spacing-lg);
}

.testimonial-card blockquote {
  font-style: italic;
  font-size: var(--font-size-lg);
  color: var(--color-gray-dark);
  margin-bottom: var(--spacing-md);
  line-height: 1.6;
}

.testimonial-card cite {
  color: var(--color-primary-green);
  font-weight: 500;
  font-style: normal;
}

/* Estados de carga del formulario */
.form-loading {
  opacity: 0.7;
  pointer-events: none;
}

.form-success {
  background: rgba(34, 139, 34, 0.1);
  border-color: var(--color-primary-green);
}

.form-error {
  background: rgba(220, 53, 69, 0.1);
  border-color: #dc3545;
}

/* Responsive */
@media (max-width: 1024px) {
  .contact-content {
    grid-template-columns: 1fr;
    gap: var(--spacing-2xl);
  }
}

@media (max-width: 768px) {
  .page-hero {
    padding: calc(var(--spacing-2xl) + 70px) 0 var(--spacing-2xl) 0;
  }

  .contact-form-container,
  .contact-info-card,
  .quick-faq,
  .testimonial-card {
    padding: var(--spacing-lg);
  }

  .form-row {
    grid-template-columns: 1fr;
    gap: 0;
  }

  .checkbox-group {
    grid-template-columns: 1fr;
  }

  .social-info {
    flex-direction: column;
    text-align: center;
  }

  .contact-method,
  .response-time {
    flex-direction: column;
    text-align: center;
  }

  .form-actions .btn {
    min-width: 100%;
  }
}

/* Animaciones */
.form-section {
  opacity: 0;
  animation: fadeInUp 0.6s ease-out forwards;
}

.form-section:nth-child(1) { animation-delay: 0.1s; }
.form-section:nth-child(2) { animation-delay: 0.2s; }
.form-section:nth-child(3) { animation-delay: 0.3s; }
</style>

<script>
// Funcionalidad del formulario
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('contactForm');
  const btnText = document.querySelector('.btn-text');
  const btnLoading = document.querySelector('.btn-loading');

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Mostrar estado de carga
      btnText.style.display = 'none';
      btnLoading.style.display = 'block';
      form.classList.add('form-loading');

      // Simular envío (aquí conectarías con tu backend)
      try {
        await new Promise(resolve => setTimeout(resolve, 2000));

        // Simular éxito
        form.classList.remove('form-loading');
        form.classList.add('form-success');

        // Mostrar mensaje de éxito
        const successMessage = document.createElement('div');
        successMessage.innerHTML = `
          <div style="background: var(--color-primary-green); color: white; padding: var(--spacing-lg); border-radius: var(--radius-md); text-align: center; margin-top: var(--spacing-lg);">
            <h3 style="color: white; margin-bottom: var(--spacing-sm);">¡Mensaje enviado exitosamente! ✅</h3>
            <p style="margin-bottom: 0;">Nos contactaremos contigo en menos de 24 horas con una propuesta personalizada.</p>
          </div>
        `;

        form.appendChild(successMessage);
        form.reset();

      } catch (error) {
        // Manejar error
        form.classList.remove('form-loading');
        form.classList.add('form-error');

        console.error('Error al enviar el formulario:', error);
        alert('Hubo un error al enviar el formulario. Por favor, inténtalo de nuevo o contáctanos directamente.');
      } finally {
        // Restaurar botón
        btnText.style.display = 'block';
        btnLoading.style.display = 'none';
      }
    });
  }

  // Validación en tiempo real
  const requiredFields = form.querySelectorAll('[required]');
  requiredFields.forEach(field => {
    field.addEventListener('blur', () => {
      if (field.value.trim() === '') {
        field.style.borderColor = '#dc3545';
      } else {
        field.style.borderColor = 'var(--color-primary-green)';
      }
    });
  });
});
</script>